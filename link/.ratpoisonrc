################################################################################
# Initial setup stuff
################################################################################
# Unbind some default keybindings
source $HOME/.ratpoisonunbind
source $HOME/.ratpoisonrc.local

# Set prefix to ctrl-z
escape C-z

# Load .Xresources and .Xresources local
# For some reason, merging them in .xinitrc
# doesn't work with ratpoison...
exec xrdb -merge $HOME/.Xresources
exec xrdb -merge $HOME/.Xresources.local

# Create six windows
exec rpws init 6 -k

# There are three different ways ratpoison can "name" frames.
# By title, name, or class. Title gets you gunk like "emacs@localhost.localdomain";
# but name and class give you the sensible "emacs" or "Emacs".
set winname class

# Disable startup message
startup_message off

#rudeness is a bitwise or of the following values:
# 1    Transient windows may raise.
# 2    Normal windows may raise.
# 4    New transient windows end up in the foreground.
# 8    New normal windows end up in the foreground.
rudeness 13

################################################################################
# Appearance-related settings
################################################################################

# Cosmetics
exec xsetroot -bg black

# Graphics tweaks
# Not quite sure what these do, copied from Reactor Core.
# Supposedly make borders take up less space.
set border       0
set padding      0 0 0 0
set barpadding   0 0

# Bar settings
set wingravity center
set transgravity center
set bargravity n
set border 0 0
set barborder 1
set padding 0 16 0 0
set barpadding 1 1
set inputwidth 100

# Conky setup
unmanage panel
unmanage conky
unmanage conky-cli
alias conky exec conky -c $HOME/.conkyrc.d/conky-rp
conky

# Restart conky when reloading rp
addhook restart killall conky

################################################################################
# Mouse-related settings
################################################################################

# Banish the mouse with each screenchange
addhook switchwin banish
addhook switchframe banish
addhook prefix banish

# Run unclutter so the mouse hangs around no longer than needed.
exec unclutter -idle 1 -jitter 2 -root

# Change the mouse icon
exec xsetroot -cursor_name left_ptr

# Set the mouse warping option.
warp on

################################################################################
# Display-related settings
################################################################################

# Redisplay - extend focused window to full
# size of frame and redisplay it
bind L redisplay

################################################################################
# Navigation-related settings
################################################################################

# Vim-style movements
bind h focusleft
bind j focusdown
bind k focusup
bind l focusright

bind space focus

# Vim-style movements
bind H exchangeleft
bind J exchangedown
bind K exchangeup
bind L exchangeright

# Move between screens
bind C-l nextscreen
bind C-h prevscreen

# Window-splitting
bind minus split
bind bar hsplit

################################################################################
# Workspace-related settings
################################################################################

# This should set up rpws and groups
# http://ratpoison.elektrubadur.se/rpws
#exec rpws -i
#exec rpws -b

# Create workspaces
bind 1 exec rpws 1
bind 2 exec rpws 2
bind 3 exec rpws 3
bind 4 exec rpws 4
bind 5 exec rpws 5
bind 6 exec rpws 6
bind 7 exec rpws 7
bind 8 exec rpws 8
bind 9 exec rpws 9
bind 10 exec rpws 10
bind 11 exec rpws 11
bind 12 exec rpws 12

################################################################################
# Command-related settings
################################################################################

# aliasing keys within ratpoison
alias dump exec ratpoison -c "setenv fs1 `ratpoison -c 'fdump'`"
alias get exec ratpoison -c "frestore `ratpoison -c 'getenv fs1'`"
alias reconfig exec ratpoison -c "source $HOME/.ratpoisonrc"
alias reload exec rp-reload

# make semicolon invoke ratpoison command, and colon shell command.
bind semicolon colon
bind colon exec

# Make focused window the only window
bind O only

# Close current window
bind Q kill

# Delete current window
bind q delete

# 'Nullify' prefix by pressing Escape
bind Escape abort

################################################################################
# Application-related settings
################################################################################

### Aliases

alias dmenu exec dmenu_run -b
alias term exec urxvt
alias edit term -e vim $HOME/.ratpoisonrc && ratpoison -c "reload"
alias elinks term -e elinks

## Bindings

# time
bind a time

# Web browsers
bind b exec dwb
bind B elinks

# Terminals
bind enter exec urxvt
bind c exec urxvt

# Dmenu
bind d dmenu

# Runs a perl script which emulates the Mac's expose feature.
bind e exec $HOME/bin/expose

# Runs a shell script which creates an alt-tab menu analog
bind E exec $HOME/bin/windows

# Open link in dwb
bind f exec dwb `$RATPOISON -c getsel`

# Package update
bind s term -e sudo pacman -Syu
bind S term -e packer -Syu --noedit --noconfirm

# Open Thunderbird email client
bind t exec thunderbird

# Open Vim
bind v exec urxvt -e vim

# Zathura pdf viewer
bind z exec zathura
